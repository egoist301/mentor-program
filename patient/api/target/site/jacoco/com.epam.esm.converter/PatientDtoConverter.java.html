<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ru"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PatientDtoConverter.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">api</a> &gt; <a href="index.source.html" class="el_package">com.epam.esm.converter</a> &gt; <span class="el_source">PatientDtoConverter.java</span></div><h1>PatientDtoConverter.java</h1><pre class="source lang-java linenums">package com.epam.esm.converter;

import com.epam.esm.dto.PatientPartialRequestDto;
import com.epam.esm.dto.PatientRequestDto;
import com.epam.esm.dto.PatientResponseDto;
import com.epam.esm.repository.entity.Patient;
import com.epam.esm.util.DateFormatter;

import java.text.ParseException;
import java.util.stream.Collectors;

public final class PatientDtoConverter {
    private PatientDtoConverter() {
    }

    public static PatientResponseDto convertToDto(Patient patient) {
<span class="fc" id="L17">        PatientResponseDto patientResponseDto = new PatientResponseDto();</span>
<span class="fc" id="L18">        patientResponseDto.setId(patient.getId());</span>
<span class="fc" id="L19">        patientResponseDto.setFirstName(patient.getFirstName());</span>
<span class="fc" id="L20">        patientResponseDto.setLastName(patient.getLastName());</span>
<span class="fc" id="L21">        patientResponseDto.setMiddleName(patient.getMiddleName());</span>
<span class="fc" id="L22">        patientResponseDto.setPhoneNumber(patient.getPhoneNumber());</span>
<span class="fc" id="L23">        patientResponseDto.setDateOfBirth(DateFormatter.convertDateToString(patient.getDateOfBirth()));</span>
<span class="fc" id="L24">        patientResponseDto.setIdentificationNumber(patient.getIdentificationNumber());</span>
<span class="fc" id="L25">        patientResponseDto.setCreateDate(DateFormatter.convertDateToString(patient.getCreateDate()));</span>
<span class="fc" id="L26">        patientResponseDto.setUpdateDate(DateFormatter.convertDateToString(patient.getUpdateDate()));</span>
<span class="fc" id="L27">        patientResponseDto.setIllnesses(patient.getIllnesses().stream().map(IllnessDtoConverter::convertToDto).collect(</span>
<span class="fc" id="L28">                Collectors.toSet()));</span>
<span class="fc" id="L29">        return patientResponseDto;</span>
    }

    public static Patient convertToEntity(PatientRequestDto patientRequestDto) throws ParseException {
<span class="fc" id="L33">        Patient patient = new Patient();</span>
<span class="fc" id="L34">        patient.setFirstName(patientRequestDto.getFirstName());</span>
<span class="fc" id="L35">        patient.setMiddleName(patientRequestDto.getMiddleName());</span>
<span class="fc" id="L36">        patient.setLastName(patientRequestDto.getLastName());</span>
<span class="fc" id="L37">        patient.setPhoneNumber(patientRequestDto.getPhoneNumber());</span>
<span class="fc" id="L38">        patient.setDateOfBirth(DateFormatter.convertStringToDate(patientRequestDto.getDateOfBirth()));</span>
<span class="fc" id="L39">        patient.setIdentificationNumber(patientRequestDto.getIdentificationNumber());</span>
<span class="fc" id="L40">        patient.setIllnesses(</span>
<span class="fc" id="L41">                patientRequestDto.getIllnesses().stream().map(IllnessDtoConverter::convertToEntity).collect(</span>
<span class="fc" id="L42">                        Collectors.toSet()));</span>
<span class="fc" id="L43">        return patient;</span>
    }

    public static Patient partialConvertToEntity(PatientPartialRequestDto patientPartialRequestDto)
            throws ParseException {
<span class="nc" id="L48">        Patient patient = new Patient();</span>
<span class="nc" id="L49">        patient.setFirstName(patientPartialRequestDto.getFirstName());</span>
<span class="nc" id="L50">        patient.setMiddleName(patientPartialRequestDto.getMiddleName());</span>
<span class="nc" id="L51">        patient.setLastName(patientPartialRequestDto.getLastName());</span>
<span class="nc" id="L52">        patient.setPhoneNumber(patientPartialRequestDto.getPhoneNumber());</span>
<span class="nc bnc" id="L53" title="All 2 branches missed.">        if (patientPartialRequestDto.getDateOfBirth() != null) {</span>
<span class="nc" id="L54">            patient.setDateOfBirth(DateFormatter.convertStringToDate(patientPartialRequestDto.getDateOfBirth()));</span>
        }
<span class="nc bnc" id="L56" title="All 2 branches missed.">        if (patientPartialRequestDto.getIllnesses() != null) {</span>
<span class="nc" id="L57">            patient.setIllnesses(</span>
<span class="nc" id="L58">                    patientPartialRequestDto.getIllnesses().stream().map(IllnessDtoConverter::partialConvertToEntity)</span>
<span class="nc" id="L59">                            .collect(Collectors.toSet()));</span>
        }
<span class="nc" id="L61">        return patient;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>